# 엔드포인트별 비즈니스 요구사항 분석

---

## Product

### POST /api/products : 프로덕트 생성

```json
{
  // Request
  "name": "저온 숙성 슈크림 빵",
  "price": 1000
}
```

- [ ] `name`은 null이 아니어야 하고, 유효한 문자가 1개 이상 존재해야 한다
- [x] price 는 null이거나 0 미만일 수 없다

<br> 

### GET /api/products : 프로덕트 조회

```json
[
  // Response
  {
    "id": 1,
    "name": "후라이드",
    "price": 16000
  },
  {
    "id": 2,
    "name": "양념치킨",
    "price": 16000
  }
]
```

<br><br>

## Table

### POST /api/tables : 테이블 생성

```json
{
  // Request
  "numberOfGuests": 0,
  "empty": true
}
```

- [ ] `numberOfGuests`는 0 이상이어야 한다. 기본값은 0이다.
- [x] `empty`는 주문 가능 여부를 나타낸다. 미전달시 기본값은 false이다.

<br>

### GET /api/tables : 테이블 조회

```json
[
  // Response
  {
    "id": 1,
    "tableGroupId": null,
    "numberOfGuests": 0,
    "empty": true
  },
  {
    "id": 2,
    "tableGroupId": null,
    "numberOfGuests": 0,
    "empty": true
  }
]
```

<br>

### PUT /api/tables/{tableId}/empty : 테이블 주문 가능 여부 수정

```json
{
  // Request
  "empty": true
}
```

- [x] PathVariable로 전달된 tableId로 테이블을 찾는다. 없으면 예외를 던진다.
- [x] 찾은 테이블에 그룹 아이디가 없어야 한다. 있으면 예외를 던진다.
- [x] 찾은 테이블에 COOKING, MEAL 상태인 주문이 없어야 한다. 있으면 예외를 던진다.
- [x] 테이블의 주문 가능 여부 상태값인 empty를 요청값대로 수정한다.

<br>

### PUT /api/tables/{tableId}/number-of-guests : 테이블 고객 인원 수정

```json
{
  // Request
  "numberOfGuests": 10
}
```

- [x] `numberOfGuests` 는 0 이상이어야 한다.
- [x] PathVariable로 전달된 tableId로 테이블을 조회한다. 없으면 예외를 던진다.
- [x] 조회된 테이블이 주문 불가 상태(empty:true) 일 경우 예외를 던진다.
    - 현재 IllegalArgumentException인데, IllegalStateException이 더 적절하지 않을까?
- [x] 유효성 검증을 모두 통과했다면 요청값대로 고객 인원수를 수정한다.

<br><br>

## Menu

### POST /api/menus : 메뉴 생성

```json
{
  "name": "후라이드 한 마리 + 양념 한 마리",
  "price": 30000,
  "menuGroupId": 1,
  "menuProducts": [
    {
      "productId": 1,
      "quantity": 1
    },
    {
      "productId": 2,
      "quantity": 1
    }
  ]
}
```

- [x] `price`는 null이거나 음수일 수 없다
- [x] `menuGroupId`는 존재하는 값이어야 한다
    - 즉, Menu는 생성 시점부터 특정 Menu Group 소속이어야 한다.
    - `Menu Group` : `Menu` = `한 마리 메뉴` : `후라이드 치킨`
- [ ] `menuProducts`는 null이거나 비어있지 않아야 한다
- [x] `price`는 `menuProducts의 총합계액` 보다 클 수 없다
    - 묶음의 가격이 낱개의 합 보다 크면 안된다는 비즈니스 정책이다.
    - 0 <= `price` <= menuProducts 총 합계액
- [x] Menu 를 저장하고 할당된 Menu ID를 menuProducts에도 할당한 뒤 menuProducts도 저장한다

<br>

### GET /api/menus : 메뉴 조회

```json
[
  // Response
  {
    "id": 1,
    "name": "후라이드치킨",
    "price": 16000,
    "menuGroupId": 2,
    "menuProducts": [
      {
        "seq": 1,
        "menuId": 1,
        "productId": 1,
        "quantity": 1
      }
    ]
  }
]
```

<br>

### POST /api/table-groupos : 테이블 그룹 설정

```json
{
  // Request
  "orderTables": [
    {
      "id": 1
    },
    {
      "id": 2
    }
  ]
}
```

<br>

<br><br>

## Table Group

<br><br>

## Menu Group

<br><br>

## Order

<br><br>
